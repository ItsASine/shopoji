<!DOCTYPE html>
<html lang="en">

<head>
    <title>Shopoji - Selling emojis in a free market!</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="description" content="Shopkeep game with an integrated free market"/>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css"
          integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.1/moment.min.js"></script>
    <script src="https://js.pusher.com/4.1/pusher.min.js"></script>
    <script>
      // Enable pusher logging - don't include this in production
      Pusher.logToConsole = true;

      var handleLogs = function(message) {
        $('#messages').append(
            '<div class="row"><div class="col alert alert-info rounded border border-dark"><span>' +
            moment().format('MMMM Do YYYY, h:mm:ss a') + ':<br />' + message +
            '</span></div></div>'
        );
      };

      var pusher = new Pusher('APP_KEY', {
        cluster: 'APP_CLUSTER',
        encrypted: true
      });

      var channel = pusher.subscribe('free-market');
      channel.bind('new-shop', function(data) {
        var amountOfApples = $('.apple').first().find('.amount');
        var originalApples = amountOfApples.text();

        handleLogs(data.message);
        amountOfApples.text(parseInt(originalApples) + data.inventory.apple);
      });
    </script>

    <link href="assets/css/styles.css" rel="stylesheet">
</head>

<body>
<h1 class="text-center">Shopoji - Single Player Free Market Game</h1>

<div class="container">
    <div class="row">
        <div id="shop" class="col-9">
            <div id="market">
                <h2>Global Market:</h2>

                <table class="table table-striped">
                    <thead class=""> <!--thead-light-->
                    <tr>
                        <th scope="col">Item</th>
                        <th scope="col">Amount on the Market</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="apple">
                        <th scope="row">&#127823;</th>
                        <td class="amount">10</td>
                    </tr>
                    </tbody>
                </table>

                <h2>Your Shop:</h2>

                <table class="table table-striped table-dark">
                    <thead class=""> <!--thead-light-->
                    <tr>
                        <th scope="col">Item</th>
                        <th scope="col">Amount on hand</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="apple">
                        <th scope="row">&#127823;</th>
                        <td class="amount">10</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div>
                <h2>Current Customers</h2>

                <table class="table table-striped">
                    <thead class=""> <!--thead-light-->
                    <tr>
                        <th scope="col">Person</th>
                        <th scope="col">Cart Item</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <th scope="row">Lady</th>
                        <td class="amount">&#127823;</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="messages" class="col-sm">
            <h3>Game Logs</h3>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js"
        integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4"
        crossorigin="anonymous"></script>
</body>
</html>
